
@{
    ViewBag.Title = "Рецепты";
}

<script>
    $(document).ready(function () {
        $.getJSON('GetRecipies', function (data) {
            fill(data);
        });
    });

    function fill(data) {
        var container1 = document.getElementById("listRecipies1");
        container1.innerHTML = "";
        var container2 = document.getElementById("listRecipies2");
        container2.innerHTML = "";
        var container3 = document.getElementById("listRecipies3");
        container3.innerHTML = "";

        var i = 0;
        $.each(data, function (key, val) {
                var img = document.createElement('img');
                img.classList.add("img-responsive");
                img.classList.add("img-rounded");
                img.setAttribute('alt', "140x140");
                img.setAttribute('src', val['PhotoUrl']);
                img.style.width = '140px';
                img.style.height = '140px';

                var h2 = document.createElement('h2');
                h2.innerText = val['Name'];

                var p = document.createElement('p');
                p.innerText = val['Preview'];
                var a = document.createElement('a');
                a.classList.add('btn');
                a.classList.add('btn-default');
                a.setAttribute('href', 'Recipe/' + val['Id']);
                a.setAttribute('role', 'button');
                a.innerText = 'Подробнее >>';
                p.appendChild(a);

                switch (i % 3) {
                    case 1:
                        {
                            container1.appendChild(img);
                            container1.appendChild(h2);
                            container1.appendChild(p);
                            break;
                        }
                    case 2:
                        {
                            container2.appendChild(img);
                            container2.appendChild(h2);
                            container2.appendChild(p);
                            break;
                        }
                    case 0:
                        {
                            container3.appendChild(img);
                            container3.appendChild(h2);
                            container3.appendChild(p);
                            break;
                        }

                }
                i++;



        });
    }

    function sendTags() {
        $.post('GetRecipies', $("#search").serialize(),
            function (data) {
                console.log(data);
                fill(data);
            });
    }


</script>

<div class="container">
    <div class="row">
        <div class="col-md-3">
            <div class="panel-group" id="accordion">
                <form name="search" id="search">
                    @{

                        foreach (var category in Model)
                        {
                            <div class="panel panel-default">
                                <div class="panel-heading">
                                    <h4 class="panel-title">
                                        <a data-toggle="collapse" href="#@category.Name">@category.Name</a>
                                    </h4>
                                </div>
                                <div id="@category.Name" class="panel-collapse collapse in">
                                    <div class="panel-body">
                                        @{
                                            foreach (var tag in category.Tags)
                                            {

                                                <div class="checkbox">
                                                    <label><input type="checkbox" value="@tag.Name" name="tags">@tag.Name</label>
                                                </div>

                                            }
                                        }

                                    </div>
                                </div>
                            </div>

                                            }
                    }
                </form>
            </div>
        </div>





        <div class="col-md-9">


            <form class="navbar-form">
                <div class="btn-group input-group">
                        <div class="form-group" styles="width:100%" >
                            <input type="text" class="form-control" placeholder="Поиск">
                        </div>
                        <div class="form-group input-group-btn">
                            <button class="btn btn-default" type="button" onclick="sendTags()">Поиск</button>
                        </div>
                </div>
            </form>

            <div class="col-md-4">
               <div id="listRecipies1">

                 
               </div>
            </div>
            <div class="col-md-4">
                <div id="listRecipies2">


                </div>
            </div>
            <div class="col-md-4">
                <div id="listRecipies3">


                </div>
            </div>

          


        </div>



    </div>

</div>




